/* ─────────────────────────────────────────────
   Componentes: tarjetas de proyecto y modal
   ───────────────────────────────────────────── */

/* ===== Tarjeta de proyecto ===== */

.project-card {
  border: none;
  padding: 0;
  margin: 0;
  background: transparent;
  cursor: pointer;
  display: block;
  text-align: left;
}

/* ===== Miniatura (Branding/Editorial) ===== */
/* En tu HTML: .project-thumb contiene la imagen visible */
.project-thumb {
  width: 100%;
  border: 1px solid var(--border);
  background: var(--bg-alt);

  /* MODIFICADO: Altura automática para evitar huecos blancos (Opción B) */
  height: auto;
  display: block; /* Antes grid para centrar */
  
  overflow: hidden;

  transition:
    transform 0.18s ease-out,
    box-shadow 0.18s ease-out,
    border-color 0.18s ease-out;
}

.project-thumb img {
  width: 100%;
  height: auto; /* Se adapta al contenido */
  display: block;

  /* MODIFICADO: Eliminamos object-fit para que no dependa de un contenedor fijo */
  /* object-fit: contain; */

  background: var(--bg-alt);
}

/* ===== Tarjetas con <img> directo (Cartelería/Infografía) ===== */
/* En tu HTML: <button class="project-card"><img ...></button> */
.project-card > img {
  width: 100%;
  height: auto;
  display: block;
  border: 1px solid var(--border);
  background: var(--bg-alt);

  /* Para carteles/infografías: se ven completos, sin recorte */
  object-fit: contain;

  transition:
    transform 0.18s ease-out,
    box-shadow 0.18s ease-out,
    border-color 0.18s ease-out;
}

/* Hover / focus (para ambos tipos) */
.project-card:hover .project-thumb,
.project-card:focus-visible .project-thumb,
.project-card:hover > img,
.project-card:focus-visible > img {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  border-color: #bbb39a;
}

/* Efecto Título en Hover (Solo Desktop) */
@media (min-width: 992px) {
  .project-card {
    position: relative; 
    padding-bottom: 20px; /* Espacio reservado para que no salte el layout al aparecer texto, o si es absoluto */
    /* De hecho, mejor no reservar y dejar que aparezca absoluto sobreimpreso o debajo fluyendo.
       Si fluye, moverá cosas. Lo mejor es absoluto o que ya esté ahí opacity 0.
       Vamos a usar pseudo elemento absolute debajo.
    */
    padding-bottom: 0;
    overflow: visible; /* Permitir ver fuera */
  }

  .project-card::after {
    content: attr(data-title);
    display: block;
    
    /* Posicionamiento */
    position: absolute;
    top: 100%; /* Justo debajo */
    left: 0;
    width: 100%;
    margin-top: 0.5rem;
    
    /* Estilos de texto */
    font-size: 0.9rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text);
    text-align: center; /* Centrado respecto a la card */
    
    /* Estado inicial: oculto */
    opacity: 0;
    transform: translateY(-5px);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out;
    pointer-events: none; /* Que no moleste al click */
  }

  /* Estado Hover: visible */
  .project-card:hover::after,
  .project-card:focus-visible::after {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Accesibilidad: quita el borde por defecto y usa focus-visible */
.project-card:focus {
  outline: none;
}
.project-card:focus-visible {
  outline: 2px solid #bbb39a;
  outline-offset: 3px;
}

/* Imágenes del carrusel: ocultas en la página */
.project-images {
  display: none;
}

/* ─────────────────────────────────────────────
   Modal de proyecto (imágenes a sangre + texto siempre visible)
   ───────────────────────────────────────────── */

.project-modal {
  position: fixed;
  inset: 0;
  z-index: 40;
  display: none;
  align-items: center;
  justify-content: center;
}

.project-modal.is-open {
  display: flex;
}

.project-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
}

/* Caja del modal */
.project-modal-dialog {
  position: relative;
  z-index: 1;

  width: min(960px, 95vw);
  max-height: 90vh;

  background: var(--bg-alt);
  border: 1px solid var(--border);

  /* Importante: el scroll NO va aquí */
  overflow: hidden;
}

/* Botón de cerrar */
.project-modal-close {
  position: absolute;
  top: 0.4rem;
  right: 0.65rem;
  border: none;
  background: none;
  font-size: 1.6rem;
  cursor: pointer;
  line-height: 1;
  z-index: 2;
}

/* Cuerpo del modal: columna con 2 zonas:
   - zona imágenes (flex: 1, con scroll si hace falta)
   - zona texto (auto, sin recortarse)
*/
.project-modal-body {
  display: flex;
  flex-direction: column;
  max-height: 90vh;
}

/* Zona de imágenes: A SANGRE, con scroll si hay muchas */
.project-modal-images {
  /* ocupa el espacio disponible */
  flex: 1 1 auto;

  /* aquí sí hay scroll cuando toca */
  overflow: auto;

  /* Ocultar barra de scroll (Chrome, Safari, Edge) */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge legacy */
  
  /* imágenes apiladas */
  display: flex;
  flex-direction: column;
  gap: 0.75rem;

  /* sin padding para que vayan a sangre */
  padding: 0;
}

/* Ocultar barra de scroll (Webkit: Chrome, Safari) */
.project-modal-images::-webkit-scrollbar {
  display: none;
}

/* Imágenes: completas y sin recorte */
.project-modal-images img {
  width: 100%;
  height: auto;
  display: block;

  /* sin bordes para “a sangre” */
  border: none;

  background: var(--bg);
  object-fit: contain;
}

/* Texto (pie): SIEMPRE visible, con padding y sin cortarse */
.project-modal-meta {
  flex: 0 0 auto;
  padding: 0.9rem 1rem 1rem;
  border-top: 1px solid var(--border);
  background: var(--bg-alt);

  /* permite que el texto crezca */
  overflow: visible;
}

.project-modal-title {
  font-size: var(--text-sm);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  margin: 0 0 0.35rem;
}

.project-modal-description {
  margin: 0;
  font-size: var(--text-base);
  line-height: 1.55;
}

/* ─────────────────────────────────────────────
   CASO 1 IMAGEN: modal se ajusta al contenido (shrink-wrap)
   El texto se comprimirá al ancho de la imagen.
   ───────────────────────────────────────────── */

/* Ajustamos el contenedor del modal cuando tiene 1 sola imagen */
.project-modal-dialog:has(.project-modal-images img:only-child) {
  /* width: auto hace que el div se encoja al contenido, 
     pero necesitamos max-content o fit-content para imágenes */
  width: fit-content;  
  max-width: 95vw;
}

/* Ajustes internos para la imagen única */
.project-modal-dialog:has(.project-modal-images img:only-child) .project-modal-images {
  overflow: hidden;         /* no scroll */
  display: block;           /* bloque normal */
  padding: 0;
  width: auto;              /* dejamos que la imagen defina el ancho */
}

/* FIX: El texto debe ajustarse al ancho que decida la imagen, no empujar el ancho */
.project-modal-dialog:has(.project-modal-images img:only-child) .project-modal-meta {
  width: 0;           /* Truco: resetea el ancho natural para que no empuje */
  min-width: 100%;    /* Luego le forzamos a ocupar el 100% del padre (definido por la img) */
  box-sizing: border-box; /* Asegurar que el padding no sume ancho extra */
}

.project-modal-dialog:has(.project-modal-images img:only-child) .project-modal-images img {
  width: auto;             /* ancho natural */
  max-width: 100%;         /* pero no desborde pantalla */
  
  /* Altura máxima para que quepa en pantalla restando espacio aprox del header/footer */
  max-height: calc(90vh - 8rem);
  
  display: block;   
  object-fit: contain;
}

/* Bloquear scroll del fondo cuando el modal está abierto */
body.is-locked {
  overflow: hidden;
}
/* ─────────────────────────────────────────────
   FIX: Modales con VARIAS imágenes (Branding/Editorial)
   Imágenes a sangre y sin márgenes laterales
   ───────────────────────────────────────────── */

/* Si hay 2 o más imágenes en el modal... */
.project-modal-dialog:has(.project-modal-images img:nth-child(2)) {
  /* el modal ya no se ajusta al ancho de una imagen,
     pasa a un ancho fluido estándar (mejor para scroll) */
  width: min(960px, 95vw);
}

/* ...las imágenes llenan el ancho del modal (a sangre) */
.project-modal-dialog:has(.project-modal-images img:nth-child(2)) .project-modal-images img {
  width: 100%;
  max-width: 100%;
  height: auto;

  margin: 0;              /* adiós centrado */
  border: none;
  background: transparent; /* sin fondo */
  display: block;

  object-fit: contain;     /* se ven completas */
}

/* El pie mantiene el ancho del modal (coherente en multi-imagen) */
.project-modal-dialog:has(.project-modal-images img:nth-child(2)) .project-modal-meta {
  width: 100%;
}
